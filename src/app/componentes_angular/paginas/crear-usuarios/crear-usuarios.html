<div class="usuario-mod-container">
    <div class="form-wrapper">
        <h2>Crear Usuario</h2>

        @if (createError) {
        <div class="error-callout">
            No se pudo crear el usuario. Inténtalo de nuevo.
        </div>
        }

        <form [formGroup]="usuarioForm" (ngSubmit)="onSubmitUsuario()">
            
            <div class="form-group">
                <label for="email">Email *</label>
                <input type="email" id="email" formControlName="email"
                    [class.error]="usuarioForm.get('email')?.invalid && usuarioForm.get('email')?.touched" />
                @if (usuarioForm.get('email')?.invalid && usuarioForm.get('email')?.touched) {
                <span class="error-message">Email válido requerido</span>
                }
            </div>

            <div class="form-group">
                <label for="nombre">Nombre *</label>
                <input type="text" id="nombre" formControlName="nombre"
                    [class.error]="usuarioForm.get('nombre')?.invalid && usuarioForm.get('nombre')?.touched" />
                @if (usuarioForm.get('nombre')?.invalid && usuarioForm.get('nombre')?.touched) {
                <span class="error-message">El nombre es requerido</span>
                }
            </div>

            <div class="form-group">
                <label for="rol">Rol *</label>
                <select id="rol" formControlName="rol"
                    [class.error]="usuarioForm.get('rol')?.invalid && usuarioForm.get('rol')?.touched">
                    <option value="" disabled>Selecciona un rol</option>
                    @for (rol of roles; track rol) {
                    <option [value]="rol">{{ rol }}</option>
                    }
                </select>
                @if (usuarioForm.get('rol')?.invalid && usuarioForm.get('rol')?.touched) {
                <span class="error-message">El rol es requerido</span>
                }
            </div>

            <div class="form-actions">
                <button type="submit" [disabled]="usuarioForm.invalid" class="btn-submit">
                    Crear Usuario
                </button>
                <button type="button" class="btn-cancel" routerLink="/administrar-usuarios">
                    Cancelar
                </button>
            </div>
        </form>
    </div>
</div>
